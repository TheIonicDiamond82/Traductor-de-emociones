<ion-header [translucent]="true"></ion-header>

<ion-content [fullscreen]="true" class="ion-padding page-dibujar">
  <!-- Botón volver a inicio -->
  <a href="inicio" class="btn-volver">
    <ion-icon name="home-outline"></ion-icon>
  </a>

  <!-- Contenido principal -->
  <div class="main-content-wrapper">
    <div class="center-container container">
      <h3 class="mb-3">Dibuja para predecir la emoción</h3>

      <!-- Selector de color -->
      <div class="color-selector">
        <label for="color">Color de la línea:</label>
        <input type="color" id="color" [(ngModel)]="selectedColor" (change)="changeColor()">
      </div>

      <!-- Canvas -->
      <canvas
        #canvas
        (touchstart)="startDrawing($event)"
        (touchmove)="draw($event)"
        (touchend)="stopDrawing()"
        (mousedown)="startDrawing($event)"
        (mousemove)="draw($event)"
        (mouseup)="stopDrawing()"
        (mouseleave)="stopDrawing()"
      ></canvas>

      <!-- Botones -->
      <div class="button-container">
        <ion-button expand="block" color="danger" (click)="clearCanvas()">Limpiar</ion-button>
        <ion-button expand="block" color="success" (click)="saveDrawing()">Predecir Emoción</ion-button>
      </div>

      <!-- Resultado -->
      <div class="mt-4 pastel-resultado" *ngIf="emocion" [style.background]="color">
        <h4>{{ emocion }}</h4>
        <p>{{ mensaje }}</p>
        <small>{{ recomendacion }}</small>
      </div>
    </div>
  </div>

  <!-- Tabs -->
  <ion-tabs>
    <ion-tab-bar slot="bottom" class="custom-tab-bar">
      <ion-tab-button href="escribir" class="tab-escribir">
        <ion-icon name="create-outline"></ion-icon>
        <ion-label>Escribir</ion-label>
      </ion-tab-button>

      <ion-tab-button href="dibujar" class="tab-dibujar">
        <ion-icon name="brush-outline"></ion-icon>
        <ion-label>Dibujar</ion-label>
      </ion-tab-button>

      <ion-tab-button href="camara" class="tab-camara">
        <ion-icon name="camera-outline"></ion-icon>
        <ion-label>Cámara</ion-label>
      </ion-tab-button>

      <ion-tab-button href="imagen" class="tab-imagen">
        <ion-icon name="image-outline"></ion-icon>
        <ion-label>Subir Imagen</ion-label>
      </ion-tab-button>
    </ion-tab-bar>
  </ion-tabs>
</ion-content>
